[Unit]
Description=riak

[Service]
User=core
ExecStartPre=-/usr/bin/docker kill riak-%i
ExecStartPre=-/usr/bin/docker rm riak-%i
ExecStartPre=/usr/bin/docker pull alirizakeles/riak:2.1.1-1

ExecStart=/usr/bin/docker run --rm --name riak-%i -P -v /var/lib/riak:/home/ali/vols/riak/data -v /var/log/riak:/home/ali/vols/riak/log alirizakeles/riak:2.1.1-1
ExecStop=/usr/bin/docker stop riak-%i

[X-Fleet]
Conflicts=riak@*.service
MachineMetadata=clusterof=riak
MachineMetadata=disk=ssd
